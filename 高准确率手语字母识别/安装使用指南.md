# 手语字母识别系统 - 安装使用指南

## 📋 目录

- [📋 目录](#-目录)
- [🚀 快速开始](#-快速开始)
- [📦 安装方法](#-安装方法)
  - [方法一：作为Python包安装](#方法一作为python包安装)
  - [方法二：直接运行Web应用](#方法二直接运行web应用)
- [🎯 使用说明](#-使用说明)
  - [Python包使用](#python包使用)
  - [Web应用使用](#web应用使用)
- [🔧 数据收集与模型训练](#-数据收集与模型训练)
  - [收集训练数据](#收集训练数据)
  - [训练模型](#训练模型)
- [🌐 部署Web应用](#-部署web应用)
  - [本地运行](#本地运行)
  - [部署到云端](#部署到云端)
- [📱 移动设备访问](#-移动设备访问)
- [🔍 常见问题](#-常见问题)
- [💡 使用技巧](#-使用技巧)

## 🚀 快速开始

### 最小化安装（仅使用Web应用）

```bash
# 克隆仓库（如果尚未克隆）
git clone https://github.com/yourusername/sign_language_recognizer.git
cd sign_language_recognizer

# 安装依赖
pip install -r requirements.txt

# 运行Web应用
streamlit run streamlit_app.py
```

### 完整安装（包括Python包）

```bash
# 克隆仓库（如果尚未克隆）
git clone https://github.com/yourusername/sign_language_recognizer.git
cd sign_language_recognizer

# 安装为可编辑模式
pip install -e .

# 或者安装为正式包
pip install .
```

## 📦 安装方法

### 方法一：作为Python包安装

**1. 准备环境**

确保已安装Python 3.12或更高版本：

```bash
python --version
# 应显示 Python 3.12.x
```

**2. 安装包**

在项目目录中执行：

```bash
# 开发模式安装（修改代码后立即生效）
pip install -e .

# 或标准安装
pip install .
```

安装后，您将获得以下命令行工具：
- `sign-language-recognizer`: 运行手语识别
- `sign-language-collector`: 收集训练数据
- `sign-language-trainer`: 训练模型

### 方法二：直接运行Web应用

**1. 安装依赖**

```bash
pip install -r requirements.txt
```

**2. 运行Web应用**

```bash
streamlit run streamlit_app.py
```

## 🎯 使用说明

### Python包使用

**1. 运行手语识别**

```bash
sign-language-recognizer
```

**2. 收集训练数据**

```bash
sign-language-collector
```

**3. 训练模型**

```bash
sign-language-trainer
```

### Web应用使用

**1. 启动Web应用**

```bash
streamlit run streamlit_app.py
```

**2. 使用界面**

- **摄像头预览区**：显示实时摄像头画面和手部关键点
- **控制面板**：包含"开始识别"和"停止识别"按钮
- **识别结果区**：显示识别的手势和置信度
- **设置侧边栏**：
  - 选择摄像头
  - 调整识别结果平滑度
  - 切换显示选项

**3. 操作流程**

1. 点击"开始识别"按钮启动摄像头
2. 将手放在摄像头前，保持手势清晰
3. 系统会自动识别手势并显示结果
4. 点击"停止识别"按钮结束识别

## 🔧 数据收集与模型训练

### 收集训练数据

**1. 使用命令行工具**

```bash
sign-language-collector
```

或直接运行Python脚本：

```bash
python data_collector.py
```

**2. 操作说明**

- 按 `s` 键保存当前手势样本
- 按 `n` 键切换到下一个手势
- 按 `q` 键退出

### 训练模型

**1. 使用命令行工具**

```bash
sign-language-trainer
```

或直接运行Python脚本：

```bash
python train_model.py
```

**2. 说明**

- 训练数据默认保存在 `training_data` 目录
- 训练后的模型保存在 `gesture_model.pkl` 文件
- 如果没有训练数据，系统会提供生成示例数据的选项

## 🌐 部署Web应用

### 本地运行

对于个人使用或小型演示，本地运行是最简单的方式：

```bash
streamlit run streamlit_app.py
```

### 部署到云端

**1. 使用Streamlit Cloud（推荐）**

1. 将代码推送到GitHub仓库
2. 访问 [Streamlit Cloud](https://share.streamlit.io/)
3. 注册并连接GitHub账户
4. 点击"New app"，选择您的仓库和主文件
5. 点击"Deploy!"

**2. 使用Heroku**

需要创建以下文件：

- `Procfile`:
  ```
  web: sh setup.sh && streamlit run streamlit_app.py
  ```

- `setup.sh`:
  ```bash
  mkdir -p ~/.streamlit/
  echo "[server]\nheadless = true\nport = $PORT\nenableCORS = false\n\n" > ~/.streamlit/config.toml
  ```

然后按照Heroku的部署指南进行操作。

**3. 使用Docker**

可以创建Dockerfile进行容器化部署：

```dockerfile
FROM python:3.12-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

EXPOSE 8501

CMD ["streamlit", "run", "streamlit_app.py"]
```

## 📱 移动设备访问

如果您在本地运行Web应用，可以通过以下步骤从移动设备访问：

1. 确保移动设备和电脑在同一网络下
2. 查看电脑的IP地址（Windows: `ipconfig`，macOS/Linux: `ifconfig`）
3. 在Streamlit的运行输出中找到访问URL，格式通常是 `http://localhost:8501`
4. 在移动设备浏览器中输入 `http://[电脑IP地址]:8501`

## 🔍 常见问题

**Q: 无法打开摄像头**
A: 请检查摄像头权限和是否被其他程序占用。在macOS上，需要在系统偏好设置中允许终端或Python访问摄像头。

**Q: 识别准确率不高**
A: 确保在良好的光照条件下使用，保持手势清晰，并可以尝试重新收集数据和训练模型。

**Q: 提示缺少模型文件**
A: 请先运行数据收集和模型训练程序，或者在训练程序中选择生成示例数据。

**Q: 安装依赖时出现冲突**
A: 建议使用虚拟环境安装：
```bash
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
```

## 💡 使用技巧

1. **最佳识别距离**：手与摄像头的距离保持在30-50厘米
2. **光照条件**：避免背光，确保手部有足够的光线但不要过强
3. **手势保持**：每个手势保持2-3秒以获得稳定的识别结果
4. **背景选择**：尽量选择简单、单色的背景
5. **首次使用**：建议先收集自己的手势数据进行训练，以获得更高的准确率

---

祝您使用愉快！如有任何问题或建议，请随时反馈。
